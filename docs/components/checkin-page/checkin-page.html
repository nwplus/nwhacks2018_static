<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="iron-image" assetpath="../../bower_components/iron-image/"><template><style>:host{display:inline-block;overflow:hidden;position:relative;}#baseURIAnchor{display:none;}#sizedImgDiv{position:absolute;top:0px;right:0px;bottom:0px;left:0px;display:none;}#img{display:block;width:var(--iron-image-width, auto);height:var(--iron-image-height, auto);}:host([sizing]) #sizedImgDiv{display:block;}:host([sizing]) #img{display:none;}#placeholder{position:absolute;top:0px;right:0px;bottom:0px;left:0px;background-color:inherit;opacity:1;@apply --iron-image-placeholder;}#placeholder.faded-out{transition:opacity 0.5s linear;opacity:0;}</style><a id="baseURIAnchor" href="#"></a><div id="sizedImgDiv" role="img" hidden$="[[_computeImgDivHidden(sizing)]]" aria-hidden$="[[_computeImgDivARIAHidden(alt)]]" aria-label$="[[_computeImgDivARIALabel(alt, src)]]"></div><img id="img" alt$="[[alt]]" hidden$="[[_computeImgHidden(sizing)]]" crossorigin$="[[crossorigin]]" on-load="_imgOnLoad" on-error="_imgOnError"><div id="placeholder" hidden$="[[_computePlaceholderHidden(preload, fade, loading, loaded)]]" class$="[[_computePlaceholderClassName(preload, fade, loading, loaded)]]"></div></template><script>Polymer({is:'iron-image',properties:{src:{type:String,value:''},alt:{type:String,value:null},crossorigin:{type:String,value:null},preventLoad:{type:Boolean,value:!1},sizing:{type:String,value:null,reflectToAttribute:!0},position:{type:String,value:'center'},preload:{type:Boolean,value:!1},placeholder:{type:String,value:null,observer:'_placeholderChanged'},fade:{type:Boolean,value:!1},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1},width:{observer:'_widthChanged',type:Number,value:null},height:{observer:'_heightChanged',type:Number,value:null}},observers:['_transformChanged(sizing, position)','_loadStateObserver(src, preventLoad)'],created:function(){this._resolvedSrc=''},_imgOnLoad:function(){this.$.img.src!==this._resolveSrc(this.src)||(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))},_imgOnError:function(){this.$.img.src!==this._resolveSrc(this.src)||(this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',this._setLoading(!1),this._setLoaded(!1),this._setError(!0))},_computePlaceholderHidden:function(){return!this.preload||!this.fade&&!this.loading&&this.loaded},_computePlaceholderClassName:function(){return this.preload&&this.fade&&!this.loading&&this.loaded?'faded-out':''},_computeImgDivHidden:function(){return!this.sizing},_computeImgDivARIAHidden:function(){return''===this.alt?'true':void 0},_computeImgDivARIALabel:function(){if(null!==this.alt)return this.alt;if(''===this.src)return'';var a=this._resolveSrc(this.src);return a.replace(/[?|#].*/g,'').split('/').pop()},_computeImgHidden:function(){return!!this.sizing},_widthChanged:function(){this.style.width=isNaN(this.width)?this.width:this.width+'px'},_heightChanged:function(){this.style.height=isNaN(this.height)?this.height:this.height+'px'},_loadStateObserver:function(a,b){var c=this._resolveSrc(a);c===this._resolvedSrc||(this._resolvedSrc='',this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',''===a||b?(this._setLoading(!1),this._setLoaded(!1),this._setError(!1)):(this._resolvedSrc=c,this.$.img.src=this._resolvedSrc,this.$.sizedImgDiv.style.backgroundImage='url("'+this._resolvedSrc+'")',this._setLoading(!0),this._setLoaded(!1),this._setError(!1)))},_placeholderChanged:function(){this.$.placeholder.style.backgroundImage=this.placeholder?'url("'+this.placeholder+'")':''},_transformChanged:function(){var a=this.$.sizedImgDiv.style,b=this.$.placeholder.style;a.backgroundSize=b.backgroundSize=this.sizing,a.backgroundPosition=b.backgroundPosition=this.sizing?this.position:'',a.backgroundRepeat=b.backgroundRepeat=this.sizing?'no-repeat':''},_resolveSrc:function(a){var b=Polymer.ResolveUrl.resolveUrl(a,this.$.baseURIAnchor.href);return'/'===b[0]&&(b=(location.origin||location.protocol+'//'+location.host)+b),b}});</script></dom-module><dom-module id="paper-card" assetpath="../../bower_components/paper-card/"><template><style include="paper-material-styles">:host{display:inline-block;position:relative;box-sizing:border-box;background-color:var(--paper-card-background-color, var(--primary-background-color));border-radius:2px;@apply --paper-font-common-base;@apply --paper-card;}:host([hidden]), [hidden]{display:none !important;}.header{position:relative;border-top-left-radius:inherit;border-top-right-radius:inherit;overflow:hidden;@apply --paper-card-header;}.header iron-image{display:block;width:100%;--iron-image-width:100%;pointer-events:none;@apply --paper-card-header-image;}.header .title-text{padding:16px;font-size:24px;font-weight:400;color:var(--paper-card-header-color, #000);@apply --paper-card-header-text;}.header .title-text.over-image{position:absolute;bottom:0px;@apply --paper-card-header-image-text;}:host ::slotted(.card-content){padding:16px;position:relative;@apply --paper-card-content;}:host ::slotted(.card-actions){border-top:1px solid #e8e8e8;padding:5px 16px;position:relative;@apply --paper-card-actions;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><div class="header"><iron-image hidden$="[[!image]]" aria-hidden$="[[_isHidden(image)]]" src="[[image]]" alt="[[alt]]" placeholder="[[placeholderImage]]" preload="[[preloadImage]]" fade="[[fadeImage]]"></iron-image><div hidden$="[[!heading]]" class$="title-text [[_computeHeadingClass(image)]]">[[heading]]</div></div><slot></slot></template><script>Polymer({is:'paper-card',properties:{heading:{type:String,value:'',observer:'_headingChanged'},image:{type:String,value:''},alt:{type:String},preloadImage:{type:Boolean,value:!1},fadeImage:{type:Boolean,value:!1},placeholderImage:{type:String,value:null},elevation:{type:Number,value:1,reflectToAttribute:!0},animatedShadow:{type:Boolean,value:!1},animated:{type:Boolean,reflectToAttribute:!0,readOnly:!0,computed:'_computeAnimated(animatedShadow)'}},_isHidden:function(a){return a?'false':'true'},_headingChanged:function(a){var b=this.getAttribute('heading'),c=this.getAttribute('aria-label');('string'!==typeof c||c===b)&&this.setAttribute('aria-label',a)},_computeHeadingClass:function(a){return a?' over-image':''},_computeAnimated:function(a){return a}});</script></dom-module><dom-module id="nw-check" assetpath="../"><template><style>:host{display:flex;justify-content:center;align-items:center;margin:16px;}iron-icon{height:2em;width:2em;margin-right:10px;}#label{font-size:1.5em;}</style><iron-icon style="[[checkStyle(checked)]]" icon="[[icon(checked)]]"></iron-icon><div id="label"><slot></slot></div></template><script>var NWCheck=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'icon',value:function(a){return a?'check':'cancel'}},{key:'checkStyle',value:function(a){return'color: '+(a?'green':'red')}}],[{key:'is',get:function(){return'nw-check'}},{key:'properties',get:function(){return{checked:{type:Boolean,value:!1}}}}]),b}(Polymer.Element);customElements.define(NWCheck.is,NWCheck);</script></dom-module><dom-module id="hellosign-manager" assetpath="../"><template><style></style><h3>Sync Liability Waivers</h3><p>This syncs the signed liability waivers from HelloSign into the Firebase database so we can see them via the Check-In page.</p><code class="invalid" hidden$="[[!error]]"><pre>[[error]]</pre></code><p hidden$="[[!finished]]">Finished!</p><code><pre>[[ret]]</pre></code><nw-job id="sync" args="{}" type="hellosign.sync" finished="{{finished}}" working="{{working}}" return="{{ret}}" error="{{error}}"></nw-job><paper-button class="register" on-tap="sync" disabled$="[[working]]">Sync</paper-button></template><script>var HelloSignManager=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'sync',value:function(){this.$.sync.generateRequest()}}],[{key:'is',get:function(){return'hellosign-manager'}}]),b}(Polymer.Element);customElements.define(HelloSignManager.is,HelloSignManager);</script></dom-module></div><dom-module id="checkin-page"><template><style include="light-page">paper-card{width:100%;color:black;}paper-item{cursor:pointer;}paper-card h2{margin-top:0;}paper-checkbox{width:100%;margin-top:16px;box-sizing:border-box;text-decoration:none;letter-spacing:2px;border-radius:3px;border:none;font-weight:bold;letter-spacing:3px;padding:11px 15px;text-transform:uppercase;cursor:pointer;border-bottom:4px solid #D74343;background-color:#FF6B6B;--primary-text-color:var(--dark-text-color);--paper-checkbox-label:{width:100%;text-align:center;position:absolute;left:0;padding-left:0;};transition:background-color 140ms, border-color 140ms;}paper-checkbox[checked]{border-color:#4BAE74;background-color:#90cfaa;}[bad]{color:red;}[good]{color:green;}[warn]{color:orange;}#completions{margin-bottom:20px;}.completion{padding:10px;cursor:pointer;}.completion:hover{background-color:rgba(0,0,0,0.1);}.completion[selected]{background-color:rgba(0,0,0,0.2);}.right{float:right;}[hidden]{display:none;}code{font-family:monospace;background-color:rgba(0,0,0,0.9);padding:6px;color:var(--dark-text-color);}h3{margin-top:80px;}paper-card p{font-size:24pt;text-align:center;text-transform:capitalize;padding:10px;font-weight:lighter;border-radius:3px;}paper-card p[warn]{background-color:#f28500;color:white;}paper-card p[danger]{background-color:#D74343;color:white;}p:empty{display:none;}p:first-child{margin-top:0;}nw-tags{display:inline-block;margin:16px;}#inputs{display:flex;align-items:flex-end;}#form{width:150px;margin-right:5px;}#search{flex-grow:1000;}.card-header{margin-bottom:30px;}h1{padding-top:1em;}</style><h1 title="">Check-In</h1><div class="content"><center><p><small><b>Shortcuts:</b> Search <code>/</code>, Check-In <code>space</code></small></p></center><div id="inputs"><paper-dropdown-menu id="form" label="Form" selected-item-label="{{form}}"><paper-listbox slot="dropdown-content" selected="0"><paper-item>registration</paper-item><paper-item>mentorexpo</paper-item><paper-item>volunteer</paper-item></paper-listbox></paper-dropdown-menu><paper-input label="Search" value="{{query}}" id="search" disabled="[[!lunr]]"><iron-icon icon="icons:search" prefix=""></iron-icon></paper-input></div><paper-card hidden$="[[!displayID]]"><div class="card-content"><div class="card-header"><a class="right" target="_blank" href="/admin/select/[[form]]/[[displayID]]"><paper-icon-button icon="info-outline"></paper-icon-button></a><h2>[[heading(display)]]</h2></div><nw-check checked="[[display.rsvp.going]]">RSVPed Going</nw-check><nw-check checked="[[waiver.title]]">Signed Waiver<template is="dom-if" if="[[waiver.title]]">â€” [[waiver.title]]</template></nw-check><center><nw-tags tags="[[display.tags]]" disabled=""></nw-tags></center><nw-check checked="[[display.rsvp.large_electronic]]">Allowed to bring large electronic</nw-check><template is="dom-if" if="[[display.rsvp.large_electronic]]"><paper-input-container always-float-label=""><label slot="label">Large Electronic Reason</label><span slot="input" class="paper-input-input">[[display.rsvp.large_electronic_reason]]</span></paper-input-container></template><paper-textarea always-float-label="" label="Check In Notes" value="{{display.check_in_notes}}"></paper-textarea><paper-checkbox id="checkbox" checked="{{display.checked_in}}">Checked In</paper-checkbox><paper-checkbox id="waitlist" checked="{{display.dayof_waitlist}}">Day Of Waitlist</paper-checkbox><nw-check checked="[[display.nfc_written]]">NFC Tag Written</nw-check></div></paper-card><div id="completions"><template is="dom-repeat" items="[[autocomplete]]"><div class="completion" selected$="[[eq(index, autocompleteIndex)]]" on-tap="handleTap">[[name(registrations, item)]] &lt;[[email(registrations, item)]]&gt;</div></template></div><paper-dropdown-menu label="NFC Device" selected-item="{{deviceItem}}"><paper-listbox slot="dropdown-content"><paper-item></paper-item><template is="dom-repeat" items="[[sortName(devices)]]"><paper-item deviceid="[[item.id]]"><paper-item-body two-line=""><div>[[item.name]] &lt;[[item.email]]&gt;</div><div secondary="">[[item.manufacturer]] [[item.model]] - [[item.id]]</div></paper-item-body></paper-item></template></paper-listbox></paper-dropdown-menu><h2>Helpful Links</h2><ul><li><a target="_blank" href="https://github.com/nwhacks/nfc/releases">NFC Android App</a></li><li><a target="_blank" href="https://app.hellosign.com/s/faca04cc">19+ Waiver</a></li><li><a target="_blank" href="https://app.hellosign.com/s/7e0b0065">Under 19 Waiver</a></li><li><a target="_blank" href="/register">Registration Form</a></li><li><a target="_blank" href="/mentorexpo">Mentor / Expo Judge Form</a></li><li><a target="_blank" href="/volunteer">Volunteer Form</a></li></ul><h2>HelloSign</h2><hellosign-manager is-admin="[[isAdmin]]"></hellosign-manager></div><firebase-document disabled="[[!isAdmin]]" path="/admin/hellosign/[[formatEmail(display.email)]]" data="{{waiver}}"></firebase-document><firebase-query id="regs" disabled="[[!isAdmin]]" path="/form/[[form]]" data="{{registrations}}"></firebase-query><firebase-document disabled="[[!isAdmin]]" path="/form/[[form]]/[[displayID]]" data="{{display}}"></firebase-document><firebase-query disabled="[[!isAdmin]]" path="/admin/devices" data="{{devices}}"></firebase-query><firebase-document disabled="[[!isAdmin]]" path="/admin/devices/[[deviceid]]" data="{{device}}"></firebase-document></template><script>var CheckinPage=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){var a=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.$.search.addEventListener('keydown',function(b){if(b.stopPropagation(),'ArrowDown'===b.code)a.autocompleteIndex=Math.min(a.autocompleteIndex+1,a.autocomplete.length-1);else if('ArrowUp'===b.code)a.autocompleteIndex=Math.max(a.autocompleteIndex-1,0);else if('Enter'===b.code)a.select();else return;b.preventDefault()});var c,d=!0,f=!1;try{for(var g,h,e=this.root.querySelectorAll('paper-textarea')[Symbol.iterator]();!(d=(g=e.next()).done);d=!0)h=g.value,h.addEventListener('keydown',function(a){a.stopPropagation()})}catch(a){f=!0,c=a}finally{try{!d&&e.return&&e.return()}finally{if(f)throw c}}this.keyHandler=this.keyHandler.bind(this),document.addEventListener('keydown',this.keyHandler);var i='',j=!1,k=null;this._cardListener=window.addEventListener('keydown',function(b){(';'===b.key||'+'===b.key||'%'===b.key)&&(i='',j=!0,k&&clearTimeout(k),k=setTimeout(function(){j=!1,k=null},1e3)),j&&(b.preventDefault(),b.stopPropagation(),a.printableKey(b.keyCode)&&('Enter'===b.key?i+='\n':i+=b.key),'?\n'===i.slice(-2)&&'Enter'===b.key&&(a.checkCard(i),j=!1))})}},{key:'disconnectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),window.removeEventListener(this._cardListener),document.removeEventListener('keydown',this.keyHandler)}},{key:'handleForm',value:function(){this.displayID='',this.lunr=null}},{key:'checkCard',value:function(a){var b=a.match(/[%;+](\d+)=(\d+)=(\d+)\?/);if(!b||4!==b.length)return void console.log('unknown card format!',a,b);var c=b[2];if(console.log('student number',c),!!this.registrations){var d=-1;return this.registrations.forEach(function(a,b){a.student_number==c&&(d=b)}),0>d?void alert('Can\'t find student number '+c):void this.setDisplay(d)}}},{key:'printableKey',value:function(a){return 47<a&&58>a||32===a||13===a||64<a&&91>a||95<a&&112>a||185<a&&193>a||218<a&&223>a}},{key:'_computeDeviceID',value:function(a){return a?a.deviceid:void 0}},{key:'keyHandler',value:function(a){if('/'===a.key)this.$.search.focus();else if('Space'===a.code&&this.display)this.set('display.checked_in',!this.display.checked_in);else return;a.preventDefault()}},{key:'handleTap',value:function(a){this.autocompleteIndex=a.model.index,this.select()}},{key:'select',value:function(){var a=this.autocomplete[this.autocompleteIndex];a&&this.setDisplay(a)}},{key:'setDisplay',value:function(a){var b=this.registrations[a];this.setProperties({displayID:b.$key,query:'',autocomplete:[]}),this.$.search.blur()}},{key:'updateDisplay',value:function(a){a&&(void 0===a.checked_in&&(a.checked_in=!1),this.device&&this.device.id&&(this.set('device.write_id',this.displayID),this.set('device.write_form',this.form),this.set('device.write_name',a.first_name+' '+a.last_name)))}},{key:'heading',value:function(a){return a.first_name+' '+a.last_name+' <'+a.email+'>'}},{key:'eq',value:function(c,a){return c===a}},{key:'handleRegistrations',value:function(a){a&&(this.updateDuplicateIndex(a),this.updateLunrIndex(a))}},{key:'updateDuplicateIndex',value:function(a){var b=this,c=a.map(function(b){return b.$key}),d={};a.forEach(function(a){var c=b.cleanEmail(a.email);a.cleanEmail=c;var e=d[c]||{count:0},f=e.count;d[c]={last:a.id,count:f+1}});var e={};a.forEach(function(a,b){var c=d[a.cleanEmail],f=c.last,g=c.count;1<g&&f!==a.id&&(e[b]=!0)}),this.duplicateIndices=e}},{key:'cleanEmail',value:function(a){return(a||'').toLowerCase().trim()}},{key:'handleSearch',value:function(a,b){if(a&&b){var c=this.lunr.search(a).slice(0,5).map(function(b){return b.ref});JSON.stringify(c)!==JSON.stringify(this.autocomplete)&&(this.autocompleteIndex=0,this.autocomplete=c,this.displayID='')}}},{key:'updateLunrIndex',value:function(a){if(a){var b=a.length;if(0!==b&&this.lastLunrIndexCount!==b){this.lastLunrIndexCount=b;var c=this,d=lunr(function(){var b=this;this.ref('id'),this.field('email'),this.field('emailSplit'),this.field('name'),this.field('first_name'),this.field('last_name'),a.forEach(function(a,d){c.duplicateIndices[d]||!a.email||b.add({id:d,email:a.email,emailSplit:a.email.replace(/\W+/g,' '),name:a.name,first_name:a.first_name,last_name:a.last_name})})});this.lunr=d}}}},{key:'name',value:function(a,b){var c=a[b];return c?c.first_name+' '+c.last_name:void 0}},{key:'email',value:function(a,b){return a[b].email}},{key:'warnStatus',value:function(a){var b=this.displayStatus(a);return'Accepted, No Response'===b||'waitlisted'===b}},{key:'dangerStatus',value:function(a){var b=this.displayStatus(a);return'rejected'===b}},{key:'displayStatus',value:function(a){return'accepted'===a.status?a.rsvp?'accepted':'Accepted, No Response':a.status}},{key:'warnAge',value:function(a){return a&&-1!==a.indexOf('under')}},{key:'updateWaitlist',value:function(a){a&&this.set('display.dayof_waitlist_time',moment().toISOString())}},{key:'formatEmail',value:function(a){return a?a.replace(/\./g,'%2E'):void 0}},{key:'sortName',value:function(a){return a.sort(function(c,a){return c.name.toLowerCase()<a.name.toLowerCase()?-1:1})}}],[{key:'is',get:function(){return'checkin-page'}},{key:'properties',get:function(){return{displayID:{value:''},lunr:{type:Object,value:!1},deviceid:{computed:'_computeDeviceID(deviceItem)'}}}},{key:'observers',get:function(){return['handleRegistrations(registrations)','handleForm(form)','handleSearch(query, lunr)','updateWaitlist(display.dayof_waitlist)','updateDisplay(display)']}}]),b}(Polymer.Element);customElements.define(CheckinPage.is,CheckinPage);</script></dom-module></body></html>